<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Valve calculations · PressureDrop.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PressureDrop.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Overview</a></li><li><a class="toctext" href="../core/">Core functions</a></li><li><a class="toctext" href="../plotting/">Plotting</a></li><li><a class="toctext" href="../correlations/">Pressure &amp; temperature correlations</a></li><li><a class="toctext" href="../pvt/">PVT properties</a></li><li class="current"><a class="toctext" href>Valve calculations</a><ul class="internal"><li><a class="toctext" href="#Example-1">Example</a></li><li><a class="toctext" href="#Functions-1">Functions</a></li></ul></li><li><a class="toctext" href="../utilities/">Utilities</a></li><li><a class="toctext" href="../extending/">Extending</a></li><li><a class="toctext" href="../similartools/">Similar tools</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Valve calculations</a></li></ul><a class="edit-page" href="https://github.com/jnoynaert/PressureDrop.jl/blob/master/docs/src/valves.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Valve calculations</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Valve-calculations-1" href="#Valve-calculations-1">Valve calculations</a></h1><p>Functions to generate valve performance curves and valve pressure tables using current conditions.</p><ul><li><a href="#PressureDrop.SageAndLacy_nitrogen_Zfactor-Tuple{Any,Any}"><code>PressureDrop.SageAndLacy_nitrogen_Zfactor</code></a></li><li><a href="#PressureDrop.ThornhillCraver_gaspassage"><code>PressureDrop.ThornhillCraver_gaspassage</code></a></li><li><a href="#PressureDrop.ThornhillCraver_gaspassage_simplified-NTuple{4,Any}"><code>PressureDrop.ThornhillCraver_gaspassage_simplified</code></a></li><li><a href="#PressureDrop.domepressure_downhole"><code>PressureDrop.domepressure_downhole</code></a></li><li><a href="#PressureDrop.estimate_valve_Rvalue"><code>PressureDrop.estimate_valve_Rvalue</code></a></li><li><a href="#PressureDrop.valve_calcs-Tuple{}"><code>PressureDrop.valve_calcs</code></a></li><li><a href="#PressureDrop.valve_table"><code>PressureDrop.valve_table</code></a></li></ul><h2><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h2><pre><code class="language-julia">using PressureDrop

MDs = [0,1813, 2375, 2885, 3395]
TVDs = [0,1800, 2350, 2850, 3350]
incs = [0,0,0,0,0]
id = 2.441

well = Wellbore(MDs, incs, TVDs, id)
valves = GasliftValves([1813,2375,2885,3395], #valve MDs
                       [1005,990,975,960], #valve PTROs (psig)
                       [0.073,0.073,0.073,0.073], #valve R-values
                       [16,16,16,16]) #valve port sizes in 64ths inches

tubing_pressures = [150,837,850,840,831] #pressures at depth
casing_pressures = 1070 .+ [0,53,70,85,100]
temps = [135,145,148,151,153] #temps at depth

vdata, inj_depth = valve_calcs(valves = valves, well = well, sg_gas = 0.72, tubing_pressures = tubing_pressures, casing_pressures = casing_pressures, tubing_temps = temps, casing_temps = temps)

valve_table(vdata, inj_depth)</code></pre><pre><code class="language-none">╭─────┬──────┬──────┬──────┬──────┬───────┬───────┬──────┬──────┬──────┬────────
│ GLV │   MD │  TVD │  PSO │  PSC │  Port │     R │ PPEF │ PTRO │   TP │   CP  ⋯
│     │   ft │   ft │ psig │ psig │ 64ths │       │    % │ psig │ psig │ psig  ⋯
├─────┼──────┼──────┼──────┼──────┼───────┼───────┼──────┼──────┼──────┼────────
│   4 │ 1813 │ 1800 │ 1077 │ 1056 │    16 │ 0.073 │    8 │ 1005 │  837 │ 1123  ⋯
│   3 │ 2375 │ 2350 │ 1048 │ 1028 │    16 │ 0.073 │    8 │  990 │  850 │ 1140  ⋯
│   2 │ 2885 │ 2850 │ 1022 │ 1002 │    16 │ 0.073 │    8 │  975 │  840 │ 1155  ⋯
│   1 │ 3395 │ 3350 │  993 │  974 │    16 │ 0.073 │    8 │  960 │  831 │ 1170  ⋯
╰─────┴──────┴──────┴──────┴──────┴───────┴───────┴──────┴──────┴──────┴────────
                                                               7 columns omitted</code></pre><h2><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.estimate_valve_Rvalue" href="#PressureDrop.estimate_valve_Rvalue"><code>PressureDrop.estimate_valve_Rvalue</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>estimate_valve_Rvalue(port_size, valve_size, lapped_seat = true)</code></p><p>Estimates an R-value for your valve (not recommended) using sensible defaults, if you do not have a manufacturer-provided value specific to the valve (recommended).</p><p>Takes port size as a diameter in 64ths inches, a valve size in inches {1.0, 1.5}, and an indication of whether the seat is lapped as {true, false}.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L220-L226">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.valve_calcs-Tuple{}" href="#PressureDrop.valve_calcs-Tuple{}"><code>PressureDrop.valve_calcs</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p><code>valve_calcs(&lt;named args&gt;)</code></p><p>Calculates a standard table of pressures and temperatures for anticipated valve operation at current (steady-state) conditions.</p><p>Note that all inputs and outputs are in <strong>psig</strong> for ease of interpretation.</p><p>Additionally, all forms are derived from the force balance for opening, P<em>t * A</em>p + P<em>c * (A</em>d - A<em>p) ≥ P</em>d * A<em>d     and the force balance for closing, P</em>c ≤ P_d.</p><p>Further note that:</p><ul><li>the valve closing pressures given are a theoretical minimum (casing pressure is assumed to act on the entire area of the bellows/dome until closing).</li><li>valve opening and closing pressures are recalculated from PTRO and current conditions, rather than the other way around common during design.</li><li>casing temperature is assumed to be 85% of tubing temperature if only a tubing temperature profile is provided. <strong>To force the use of identical temperature profiles, pass the wellbore temperature twice.</strong></li></ul><p><strong>Arguments</strong></p><ul><li><code>valves::GasliftValves</code>: a GasliftValves object defining the valve string</li><li><code>well::Wellbore</code>: a Wellbore object defining the survey/segmentation points, deviation survey, and tubing</li><li><code>sg_gas</code>: injection gas specific gravity</li><li><code>tubing_pressures::Array{T, 1} where T &lt;: Real</code>: precalculated tubing pressures in <strong>psig</strong></li><li><code>casing_pressures::Array{T, 1} where T &lt;: Real</code>: precalculated casing pressures in <strong>psig</strong></li><li><code>tubing_temps::Array{T, 1} where T &lt;: Real</code>: precalculated tubing temperature profile in °F</li><li><code>casing_temps::Array{T, 1} where T &lt;: Real = tubing_temps .* 0.85</code>: precalculated casing temperature profile in °F</li><li><code>dp_min = 100</code>: minimum differential pressure (CP - TP) in psi for calculating an assumed injection point</li><li><code>one_inch_coefficient = 0.76</code>: coefficient of discharge for Thornhill-Craver gas passage calculations for 1&quot; valves</li><li><code>one_pt_five_inch_coefficient = 0.6</code>: coefficient of discharge for Thornhill-Craver gas passage calculations for 1.5&quot; valves</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L124-L150">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.valve_table" href="#PressureDrop.valve_table"><code>PressureDrop.valve_table</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>valve_table(valvedata, injection_depth = nothing)</code></p><p>Pretty prints the data returned by <code>valve_calcs</code> for interpretation.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L204-L208">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.SageAndLacy_nitrogen_Zfactor-Tuple{Any,Any}" href="#PressureDrop.SageAndLacy_nitrogen_Zfactor-Tuple{Any,Any}"><code>PressureDrop.SageAndLacy_nitrogen_Zfactor</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p><code>SageAndLacy_nitrogen_Zfactor(p, T)</code></p><p>Sage and Lacy experimental Z-factor correlation.</p><p>Takes pressure in psia and temperature in °F.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L79-L85">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.ThornhillCraver_gaspassage" href="#PressureDrop.ThornhillCraver_gaspassage"><code>PressureDrop.ThornhillCraver_gaspassage</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>ThornhillCraver_gaspassage(&lt;args&gt;)</code></p><p>Thornhill-Craver gas throughput for square-edged orifice.</p><p>See section 8.1 of <em>Fundamentals of Gas Lift Engineering</em> by Ali Hernandez, as well as published work by Ken Decker, for an in-depth discussion of the application of Thornhill-Craver to gas lift valve performance.</p><p>In general, T-C will be optimistic, but should be expected to have an effective error of up to +/- 30%.</p><p><strong>Arguments</strong></p><ul><li><code>P_td</code>: tubing pressure at depth, <strong>psig</strong></li><li><code>P_cd</code>: casing pressure at depth, <strong>psig</strong></li><li><code>T_cd</code>: gas (casing fluid) temperature at depth, °F</li><li><code>portsize_64ths</code>: valve port size in 64ths inch</li><li><code>sg_gas</code>: gas specific gravity relative to air</li><li><code>molFracCO2 = 0.0</code>, <code>molFracH2S = 0.0</code>: produced gas fractions of hydrogen sulfide and CO2, [0,1]</li><li><code>C_d = 0.827</code>: discharge coefficient–uses 0.827 by defaul to match original T-C</li><li><code>Z_correlation::Function = KareemEtAlZFactor</code>: natural gas compressibility/Z-factor correlation to use</li><li><code>pseudocrit_pressure_correlation::Function = HankinsonWithWichertPseudoCriticalPressure</code>: psuedocritical pressure function to use</li><li><code>pseudocrit_temp_correlation::Function = HankinsonWithWichertPseudoCriticalTemp</code>: pseudocritical temperature function to use</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L33-L53">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.ThornhillCraver_gaspassage_simplified-NTuple{4,Any}" href="#PressureDrop.ThornhillCraver_gaspassage_simplified-NTuple{4,Any}"><code>PressureDrop.ThornhillCraver_gaspassage_simplified</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p><code>ThornhillCraver_gaspassage_simplified(P_td, P_cd, T_cd, portsize_64ths)</code></p><p>Thornhill-Craver gas throughput for square-edged orifice (optimistic since it assumes a fully open valve where the stem does not interfere with flow).</p><p>This simplified version assumes gas specific gravity at 0.65.</p><p><strong>Arguments</strong></p><ul><li><code>P_td</code>: tubing pressure at depth, <strong>psig</strong></li><li><code>P_cd</code>: casing pressure at depth, <strong>psig</strong></li><li><code>T_cd</code>: gas (casing fluid) temperature at depth, °F</li><li><code>portsize_64ths</code>: valve port size in 64ths inch</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L3-L15">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PressureDrop.domepressure_downhole" href="#PressureDrop.domepressure_downhole"><code>PressureDrop.domepressure_downhole</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>domepressure_downhole(p_d_set, T_v, error_tolerance = 0.1, p_d_est = p_d_set/0.9, T_set = 60, Zfactor::Function = SageAndLacy_nitrogen_Zfactor)</code></p><p>Iteratively calculates the dome pressure <strong>in psia</strong> of the valve downhole using gas equation of state, assuming that the change in dome volume is negligible.</p><p><strong>Arguments</strong></p><ul><li><code>PTRO</code>: test rack opening pressure of valve <strong>in psig</strong></li><li><code>R</code>: R-value of the valve (nominally, area of port divided by area of bellows/dome, but adjusted for lapped seats, etc)</li><li><code>T_v</code>: valve temperature at depth</li><li><code>error_tolerance = 0.1</code>: error tolerance in psi</li><li><code>delta_est</code>: initial estimate for downhole dome pressure as a percentage of surface set pressure</li><li><code>T_set = 60</code>: setting temperature in °F</li><li><code>Zfactor::Function = SageAndLacy_nitrogen_Zfactor</code>: Z-factor function parameterized by target conditions as pressure in psia and temperature in °F</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jnoynaert/PressureDrop.jl/blob/15c3a9a15c2f785cbe1a2202ec4657c7e58c98c4/src/valvecalculations.jl#L94-L108">source</a></section><footer><hr/><a class="previous" href="../pvt/"><span class="direction">Previous</span><span class="title">PVT properties</span></a><a class="next" href="../utilities/"><span class="direction">Next</span><span class="title">Utilities</span></a></footer></article></body></html>
